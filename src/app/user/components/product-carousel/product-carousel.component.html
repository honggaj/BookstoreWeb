<!-- B·ªô n√∫t l·ªçc -->
<div class="flex space-x-2 mb-6">
  <button
    class="px-4 py-3 text-sm font-semibold border text-white bg-blue-500 cursor-pointer 
           transition duration-150 ease-in-out transform active:scale-95 hover:bg-blue-600"
    (click)="filterBooks('latest')">
    üÜï S·∫£n ph·∫©m m·ªõi
  </button>

  <button
    class="px-4 py-1 text-sm font-semibold border text-white bg-purple-500 cursor-pointer 
           transition duration-150 ease-in-out transform active:scale-95 hover:bg-purple-600"
    (click)="filterBooks('top-rated')">
    ‚≠ê ƒê√°nh gi√° cao
  </button>

  <button
    class="px-4 py-1 text-sm font-semibold border text-white bg-pink-500 cursor-pointer 
           transition duration-150 ease-in-out transform active:scale-95 hover:bg-pink-600"
    (click)="filterBooks('best-seller')">
    üî• B√°n ch·∫°y
  </button>
</div>


<p-carousel [value]="books" [numVisible]="5" [numScroll]="5" [circular]="true" [autoplayInterval]="3000"
  [responsiveOptions]="responsiveOptions" styleClass="custom-carousel">

  <ng-template let-book pTemplate="item">
    <div class="border border-gray-200 m-2 p-4 flex flex-col items-center text-center shadow-sm relative">

      <!-- Top bar: Rating + Favorite -->
      <div class="flex justify-between items-center w-full mb-2">
        <!-- ‚≠ê Rating -->
        <div class="text-sm text-yellow-500 font-semibold">
          <span *ngIf="book.averageRating != null; else noRating">
            ‚≠ê {{ book.averageRating | number:'1.1-1' }}
          </span>
          <ng-template #noRating>
            ‚≠ê 0 ƒë√°nh gi√°
          </ng-template>
        </div>

        <!-- ‚ù§Ô∏è Tim -->
        <button (click)="toggleFavorite(book)" class="text-red-500 text-lg">
          <i [ngClass]="favoriteBookIds.includes(book.bookId!) ? 'fas fa-heart' : 'far fa-heart'"></i>
        </button>
      </div>

      <!-- ·∫¢nh s√°ch -->
      <img [src]="book.coverImageUrl" alt="Book Image" class="w-full h-36 object-contain mb-3" />

      <!-- Ti√™u ƒë·ªÅ -->
      <h3 class="text-sm font-semibold text-gray-900 truncate">{{ book.title || 'Untitled' }}</h3>

      <!-- ƒê√°nh gi√° 5 sao tƒ©nh -->
      <div class="flex items-center justify-center text-yellow-400 text-xs mb-1">
        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
        <i class="far fa-star"></i><i class="far fa-star"></i>
        <span class="ml-1 text-gray-400">(2)</span>
      </div>

      <!-- T√°c gi·∫£ -->
      <p class="text-xs text-gray-500">T√°c gi·∫£: {{ book.author }}</p>

      <!-- Gi√° -->
      <p class="text-blue-600 font-semibold mb-3">
        {{ book.price ? (book.price | number : '1.0-0') : 'Li√™n h·ªá' }} VNƒê
      </p>

      <!-- 2 n√∫t ch·ª©c nƒÉng -->
      <div class="flex justify-center items-center space-x-2">
        <button (click)="addToCart(book)"
          class="bg-blue-100 text-blue-600 text-xs font-semibold px-3 py-1 hover:bg-blue-200">
          <i class="fas fa-cart-plus mr-1"></i> Th√™m
        </button>
        <button (click)="goToDetail(book.bookId!)"
          class="bg-gray-100 text-gray-700 text-xs font-semibold px-3 py-1 hover:bg-gray-200">
          <i class="fas fa-eye mr-1"></i> Xem
        </button>
      </div>
    </div>
  </ng-template>

</p-carousel>
