<!-- Bộ nút lọc -->
<div class="flex space-x-2 mb-6">
  <button
    class="px-4 py-3 text-sm font-semibold border text-white bg-blue-500  cursor-pointer 
          transition duration-150 ease-in-out transform active:scale-95 hover:bg-blue-600"
    (click)="filterBooks('latest')">
    🆕 Sản phẩm mới
  </button>

  <button
    class="px-4 py-1 text-sm font-semibold border text-white bg-purple-500  cursor-pointer 
          transition duration-150 ease-in-out transform active:scale-95 hover:bg-purple-600"
    (click)="filterBooks('top-rated')">
    ⭐ Đánh giá cao
  </button>

  <button
    class="px-4 py-1 text-sm font-semibold border text-white bg-pink-500  cursor-pointer 
          transition duration-150 ease-in-out transform active:scale-95 hover:bg-pink-600"
    (click)="filterBooks('best-seller')">
    🔥 Bán chạy
  </button>
</div>

<!-- Grid hiển thị sách -->
<div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 max-h-[720px] overflow-y-auto">
 <div *ngFor="let book of books" 
  class="border border-gray-200 p-4 flex flex-col items-center text-center shadow-sm relative ">

  <!-- Top bar: Rating + Favorite -->
  <div class="flex justify-between items-center w-full mb-2">
    <div class="text-sm text-yellow-500 font-semibold">
      <span *ngIf="book.averageRating != null; else noRating">
        ⭐ {{ book.averageRating | number:'1.1-1' }}
      </span>
      <ng-template #noRating>
        ⭐ 0 đánh giá
      </ng-template>
    </div>
    <button (click)="toggleFavorite(book)" class="text-red-500 text-lg">
      <i [ngClass]="favoriteBookIds.includes(book.bookId!) ? 'fas fa-heart' : 'far fa-heart'"></i>
    </button>
  </div>

  <!-- Ảnh sách -->
  <img [src]="book.coverImageUrl" alt="Book Image" class="w-full h-36 object-contain mb-3" />

  <!-- Tiêu đề -->
  <h3 class="text-sm font-semibold text-gray-900 line-clamp-2">
    {{ book.title || 'Untitled' }}
  </h3>

  <!-- Đánh giá -->
  <div class="flex items-center justify-center text-yellow-400 text-xs mb-1">
    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
    <i class="far fa-star"></i><i class="far fa-star"></i>
    <span class="ml-1 text-gray-400">(2)</span>
  </div>

  <!-- Tác giả -->
  <p class="text-xs text-gray-500">Tác giả: {{ book.author }}</p>

  <!-- Giá -->
  <p class="text-blue-600 font-semibold mb-3">
    {{ book.price ? (book.price | number : '1.0-0') : 'Liên hệ' }} VNĐ
  </p>

  <!-- Nút chức năng luôn ở cuối -->
  <div class="flex justify-center items-center space-x-2 mt-auto">
    <button (click)="addToCart(book)"
      class="bg-blue-100 text-blue-600 text-xs font-semibold px-3 py-1 hover:bg-blue-200 ">
      <i class="fas fa-cart-plus mr-1"></i> Thêm
    </button>
    <button (click)="goToDetail(book.bookId!)"
      class="bg-gray-100 text-gray-700 text-xs font-semibold px-3 py-1 hover:bg-gray-200 ">
      <i class="fas fa-eye mr-1"></i> Xem
    </button>
  </div>
</div>

</div>
